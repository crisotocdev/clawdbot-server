========================================
üìò CLAWDBOT ‚Äì ROADMAP OFICIAL (Rust + Mobile)
========================================

Estado actual:
‚úî Servidor Rust funcionando
‚úî Comunicaci√≥n TCP OK
‚úî Token validado
‚úî Respuesta correcta (PING ‚Üí PONG)
‚úî Ejecuci√≥n de programas locales probada

----------------------------------------
FASE 1 ‚Äî BASE S√ìLIDA (CONTROL LOCAL)
----------------------------------------

1.1 Limpieza y estabilidad
- Mantener main.rs estable (sin tocar seguridad por ahora)
- Confirmar que el servidor:
  - No se cae con m√∫ltiples conexiones
  - Responde siempre OK|PONG
- A√±adir logs claros por consola

1.2 Comandos esenciales (hardcodeados)
Implementar y probar uno por uno:

- TOKEN|PING
- TOKEN|NOTA          ‚Üí abre Bloc de notas
- TOKEN|VSCODE        ‚Üí abre VS Code
- TOKEN|CHROME        ‚Üí abre Google Chrome
- TOKEN|OPEN|RUTA     ‚Üí abre una carpeta espec√≠fica
- TOKEN|LOCK          ‚Üí bloquea Windows
- TOKEN|SHUTDOWN      ‚Üí apaga el PC (opcional, con cuidado)

Regla:
‚ùå NO ejecutar comandos libres
‚úÖ Solo comandos permitidos (lista blanca)

----------------------------------------
FASE 2 ‚Äî POWERSHELL CONTROLADO
----------------------------------------

2.1 Acciones permitidas
Agregar acciones PowerShell seguras:

- TOKEN|PS|GET_TIME
- TOKEN|PS|LIST_PROCESSES
- TOKEN|PS|CPU_INFO
PASOS A SEGUIR ‚Äì DESDE EL PASO 4C (Clawdbot Server)

4C) Integrar y validar el m√≥dulo de autenticaci√≥n
- Revisar auth.rs y confirmar:
  - Lectura correcta de variables de entorno (ADMIN_TOKEN, USER_TOKEN)
  - Validaci√≥n de token recibido desde el cliente
  - Asignaci√≥n correcta de roles (admin / user)
- Probar manualmente:
  - Con token v√°lido
  - Con token inv√°lido
  - Sin token
- Verificar que accesos no autorizados se bloqueen correctamente

4D) Integrar el servidor TCP con el sistema de autenticaci√≥n
- Confirmar que server.rs:
  - Reciba conexiones TCP correctamente
  - Solicite token al iniciar la conexi√≥n
  - Bloquee la conexi√≥n si el token es inv√°lido
- Asegurar que el flujo sea:
  conexi√≥n ‚Üí autenticaci√≥n ‚Üí ejecuci√≥n de comandos ‚Üí respuesta

4E) Validar ejecuci√≥n de comandos seg√∫n rol
- Revisar commands.rs:
  - Comandos permitidos para USER
  - Comandos exclusivos para ADMIN
- Verificar que:
  - Un USER no pueda ejecutar comandos de ADMIN
  - Un ADMIN tenga acceso completo
- Probar comandos inv√°lidos y confirmar manejo de errores

4F) Integrar sistema de logging
- Revisar logger.rs:
  - Registro de conexiones entrantes
  - Registro de autenticaciones exitosas y fallidas
  - Registro de comandos ejecutados
- Confirmar que los logs se escriban correctamente en la carpeta logs/

4G) Pruebas funcionales completas
- Ejecutar el servidor localmente
- Probar conexi√≥n con cliente TCP (netcat o cliente propio)
- Casos a probar:
  - Token v√°lido + comando permitido
  - Token v√°lido + comando prohibido
  - Token inv√°lido
  - Comando inexistente
- Confirmar que el servidor no se caiga ante errores

4H) Limpieza y hardening b√°sico
- Revisar manejo de errores (unwrap innecesarios)
- Evitar prints innecesarios en producci√≥n
- Verificar que no se filtren tokens en logs
- Revisar permisos de archivos generados

4I) Commit final de la etapa 4
- Ejecutar:
  git status
  git add .
  git commit -m "Completa etapa 4: autenticaci√≥n, servidor TCP y ejecuci√≥n de comandos"
  git push

4J) Preparaci√≥n para siguiente etapa
- Definir si el siguiente paso ser√°:
  - Cliente TCP
  - Cifrado de comunicaci√≥n
  - Sistema de permisos m√°s avanzado
  - Empaquetado / deployment
